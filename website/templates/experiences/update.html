{% extends "base.html" %}

{% from 'bootstrap5/form.html' import render_form %}

{% block content %}


<main>
    <!-- Booking History -->
    <div class="major-container" id="create-experience-section">
        <div class="container wrapper">
            <div class="row">
                <div class="event-header" style="margin-top: 30px;">
                    <div class="event-page-left-header">
                        <h3 class="what-to-expect-header-text">Update your events<br></h3>
                    </div>
                    <br><br>
                </div>
                <div class="col-md-12">
                    <p class="paragraph-spacing">This is where your vision gets a fresh coat of inspiration, allowing you to fine-tune every aspect of your unique experience.
                         Let's work together to bring new life to your event and make it even more extraordinary!</p>
                </div>
                <hr class="comment-spacer">
            </div>
        </div>
    </div>  

    <!-- Booking history cards -->
    <div class="container">
        <div class="row">

            <!-- Booking History Entry 1 -->
            {% for experience in experiences %}
            <div class="col-12 col-md-12 col-lg-6">

                <div class="card mb-4" data-type="Tours" data-status="sold-out" data-name="Acropolis Guided Tour">
                    <div class="row no-gutters">

                        <!-- Image container (visible on screens 767px and smaller) -->
                        <div class="col-md-4 d-none d-md-block">
                            <img src={{experience.image_1}} class="card-img-history img-fluid" alt="Event 1">
                        </div>

                        <div class="col-md-8">

                            <div class="card-body">
                                <h6 class="card-title">
                                    <b>
                                    <span class="homepage-card-name">{{experience.name}}</span>
                                    <div class="homepage-card-spacer"></div>
                                    </b>
                                </h6>
                                <hr>
                                <p class="homepage-card-duration">{{ experience.end_time }}</p>
                                <p class="card-text">Hosted by {{ experience.user.name }} - ${{experience.price}}pp</p>
                            </div>
                            
                            <div class="d-flex justify-content-start">
                                <div>
                                    <a href="/" class="btn custom-btn toggle-button rounded me-5 ms-3">
                                        Cancel
                                    </a>
                                </div>
                                <div>
                                    <a href="{{ url_for('experience.update_page', experience_id=experience.id) }}" class="btn custom-btn toggle-button rounded me-5 ms-3">
                                        update
                                    </a>
                                </div>
                            </div>
                            

                            <div class="status-red">
                                {{experience.status}}
                            </div></a>

                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- JS scripting import -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

    <!-- JS login modal script -->
    <script>
        const loginButton = document.getElementById("loginButton");
        const loginModal = new bootstrap.Modal(document.getElementById("loginModal"));
        const loginModalBody = document.querySelector("#loginModal .modal-body");
        const experiencesLink = document.getElementById("experiencesLink");
        const bookingHistoryLink = document.getElementById("bookingHistoryLink");
        const ticketSelector = document.getElementById("ticketSelector");

        let isLoggedIn = false;

        loginButton.addEventListener("click", function () {

            // User is logged out
            if (isLoggedIn) {

                // User is logged in
                loginModalBody.textContent = "You're in! You can now create and book events.";
                loginButton.textContent = "Logout";

                // Show the Experiences link
                experiencesLink.style.display = "block";

                // Show the Booking History link
                bookingHistoryLink.style.display = "block";

            } else {

                loginModalBody.textContent = "It was great having you. See you next time.";
                loginButton.textContent = "Login";

                // Hide the Experiences link
                experiencesLink.style.display = "none";

                // Hide the Booking History link
                bookingHistoryLink.style.display = "none";

            }

            // Toggle the login state
            isLoggedIn = !isLoggedIn;

            // Show the login modal
            loginModal.show();
        });
    </script>

</main>
{% endblock %}
